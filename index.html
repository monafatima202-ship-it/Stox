<!DOCTYPE html>
<html>
<head>
<title>APX ULTRA AI STOCK TERMINAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

body{
 background:radial-gradient(circle,#020617,#000);
 font-family:Segoe UI;
 color:white;
 padding:15px;
}

.header{
 text-align:center;
 font-size:26px;
 color:#38bdf8;
 text-shadow:0 0 20px #38bdf8;
 margin-bottom:20px;
}

.card{
 backdrop-filter:blur(20px);
 background:rgba(2,6,23,0.7);
 border:1px solid rgba(56,189,248,0.3);
 box-shadow:0 0 20px rgba(56,189,248,0.3);
 border-radius:15px;
 padding:15px;
 margin-bottom:15px;
}

input{
 width:95%;
 padding:12px;
 margin:6px;
 border-radius:10px;
 border:none;
 background:#020617;
 color:white;
}

button{
 padding:12px 20px;
 border:none;
 border-radius:12px;
 font-weight:bold;
 cursor:pointer;
 background:#3b82f6;
 color:white;
}

.signal{
 padding:12px;
 margin:10px 0;
 border-radius:12px;
 background:rgba(2,6,23,0.9);
 font-size:15px;
 animation:fade 0.5s;
}

.buy{ border-left:5px solid #22c55e;}
.sell{ border-left:5px solid #ef4444;}

@keyframes fade{
 from{opacity:0; transform:translateY(10px);}
 to{opacity:1; transform:translateY(0);}
}

.hidden{display:none;}

</style>
</head>

<body>

<div class="header">üöÄ APX ULTRA AI STOCK TERMINAL</div>

<!-- LOGIN -->
<div id="loginBox" class="card">
<h3>üîê Secure Login</h3>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<button onclick="login()">ACCESS TERMINAL</button>
</div>

<!-- DASHBOARD -->
<div id="dash" class="hidden">

<div class="card">
<h3>üìà REAL AI STOCK SIGNALS</h3>
<div id="scanner">Loading signals...</div>
</div>

</div>

<script>

// ===== API =====
const API="https://b.mkapi009.workers.dev";

// ===== STOCK PAIRS =====
const PAIRS=[
"AXP-OTC","PFE-OTC","INTL-OTC",
"JNJ-OTC","MCD-OTC","BA-OTC","MSFT-OTC"
];


// ===== LOGIN FUNCTION =====
async function login(){

 try{

  let u=document.getElementById("user").value.trim();
  let p=document.getElementById("pass").value.trim();

  if(!u || !p){
   alert("Enter Username & Password");
   return;
  }

  let r=await fetch(API+"/api/login",{
   method:"POST",
   headers:{ "Content-Type":"application/json" },
   body:JSON.stringify({u:u,p:p})
  });

  let j=await r.json();

  if(j.ok){
   document.getElementById("loginBox").style.display="none";
   document.getElementById("dash").classList.remove("hidden");
   startScanner();
  }else{
   alert("Wrong Login");
  }

 }catch(e){
  alert("Connection Error");
 }

}


// ===== MILONGAZI CANDLE FETCH =====
async function candles(pair){

 try{
 let r=await fetch(
 `https://milongazi197.serv00.net/otc.php?pair=${pair}&tf=M1&limit=50`
 );
 let j=await r.json();
 return j.data;
 }catch{
 return null;
 }

}


// ===== EMA =====
function EMA(c,p){
 let k=2/(p+1);
 let ema=c[0].close;
 for(let x of c){
 ema=x.close*k+ema*(1-k);
 }
 return ema;
}


// ===== RSI =====
function RSI(c,p){
 let g=0,l=0;
 for(let i=1;i<p;i++){
 let d=c[i].close-c[i-1].close;
 if(d>0) g+=d;
 else l-=d;
 }
 let rs=g/(l||1);
 return 100-(100/(1+rs));
}


// ===== AI SIGNAL =====
async function aiSignal(pair){

 let c=await candles(pair);
 if(!c) return null;

 let ema12=EMA(c,12);
 let ema26=EMA(c,26);
 let rsi=RSI(c,14);

 let last=c[c.length-1].close;
 let prev=c[c.length-2].close;

 let dir=null;

 if(ema12>ema26 && rsi>52 && last>prev) dir="CALL";
 if(ema12<ema26 && rsi<48 && last<prev) dir="PUT";

 if(!dir) return null;

 return {
 pair,
 dir,
 entry:last,
 rsi:Math.round(rsi)
 };

}


// ===== SCANNER LOOP =====
function startScanner(){

 loadScanner();

 setInterval(loadScanner,15000);

}

async function loadScanner(){

 let html="";

 for(let p of PAIRS){

 let s=await aiSignal(p);
 if(!s) continue;

 html+=`
 <div class="signal ${s.dir==="CALL"?"buy":"sell"}">
 ${s.pair} ‚Üí ${s.dir} ‚Üí ${s.entry} ‚Üí RSI ${s.rsi}
 </div>
 `;
 }

 if(html==="") html="No strong signals now";

 document.getElementById("scanner").innerHTML=html;

}

</script>

</body>
</html>
