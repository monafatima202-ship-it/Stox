<!DOCTYPE html>
<html>
<head>
<title>APX CONTROL PANEL</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
 font-family:Arial;
 background:#0f172a;
 color:white;
 padding:20px;
}
.card{
 background:#1e293b;
 padding:15px;
 margin-bottom:15px;
 border-radius:10px;
}
button{
 padding:12px;
 margin:5px;
 border:none;
 border-radius:8px;
 font-weight:bold;
 width:45%;
}
.on{background:#22c55e;color:black;}
.off{background:#ef4444;color:white;}
table{
 width:100%;
 border-collapse:collapse;
}
td,th{
 padding:10px;
 border-bottom:1px solid #334155;
 text-align:center;
}
h2{margin-bottom:20px;}
</style>
</head>

<body>

<h2>ðŸ¤– APX CONTROL PANEL</h2>

<div class="card">
<h3>Bot Control</h3>
<button class="on" onclick="botOn()">START BOT</button>
<button class="off" onclick="botOff()">STOP BOT</button>
<p id="status">Loading...</p>
</div>

<div class="card">
<h3>Stats</h3>
<p id="stats">Loading...</p>
</div>

<div class="card">
<h3>Last Signals</h3>
<table id="signals"></table>
</div>

<script>

const API="https://b.mkapi009.workers.dev";

// ===== BOT CONTROL =====
async function botOn(){
 await fetch(API+"/api/bot-on");
 loadStatus();
}

async function botOff(){
 await fetch(API+"/api/bot-off");
 loadStatus();
}

// ===== STATUS =====
async function loadStatus(){
 let r=await fetch(API+"/api/status");
 let j=await r.json();
 document.getElementById("status").innerText="Bot Status: "+j.bot;
}

// ===== STATS =====
async function loadStats(){
 let r=await fetch(API+"/api/stats");
 let j=await r.json();

 document.getElementById("stats").innerText=
 "Total: "+j.total+
 " | Win: "+j.win+
 " | Loss: "+j.loss+
 " | WR: "+j.wr+"%";
}

// ===== SIGNALS =====
async function loadSignals(){
 let r=await fetch(API+"/api/signals");
 let j=await r.json();

 let html="<tr><th>Pair</th><th>Dir</th><th>Result</th></tr>";

 j.results.forEach(s=>{
  html+=`<tr>
   <td>${s.pair}</td>
   <td>${s.direction}</td>
   <td>${s.result}</td>
  </tr>`;
 });

 document.getElementById("signals").innerHTML=html;
}

// ===== AUTO REFRESH =====
setInterval(()=>{
 loadStatus();
 loadStats();
 loadSignals();
},5000);

loadStatus();
loadStats();
loadSignals();

</script>

</body>
</html>
